#!/bin/bash

# Get root directory path
ROOT_DIR="$(dirname "$(dirname "$(realpath "$0")")")"

# Deactivate the current environment (if any)
deactivate &> /dev/null

# Activate the original CAMeL Tools environment
source "${ROOT_DIR}/envs/original/bin/activate"

# Muddle database files
SAMA_PATH="$1"
DBS_DIR="${ROOT_DIR}/databases"

muddler muddle -s "${SAMA_PATH}" \
    -t "${DBS_DIR}/calima-msa-s31.db" \
    "${DBS_DIR}/calima-msa-s31.db.muddled"

muddler muddle -s "${SAMA_PATH}" \
    -t "${DBS_DIR}/calima-msa-s31-extended.db" \
    "${DBS_DIR}/calima-msa-s31-extended.db.muddled"

# Deactivate the original CAMeL Tools environment
deactivate
